{"id":"BUD-18a","title":"Schedule-based impulses from schedule.json","description":"Generate impulses from schedule.json for recurring triggers (daily standup, weekly review, etc). These should integrate with the impulse system to wake the executive at scheduled times.","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-07T01:00:27.519709+01:00","created_by":"thunder","updated_at":"2026-01-07T01:00:27.519709+01:00"}
{"id":"BUD-1is","title":"Missing semantic relationship extraction","description":"Entity relationships are captured but semantic relationships between entities and the user are missing:\n\n**Missing relationships:**\n- Sarah Chen → user: COFOUNDER_OF (not captured)\n- Marcus → user: BROTHER_OF (not captured)  \n- Marcus: profession = veterinarian (not captured as attribute)\n- Sarah: role = product and design (not captured as attribute)\n\n**Currently working:**\n- Marcus → Portland: LIVES_IN ✓\n- James → Project Lighthouse: WORKS_ON ✓\n- Marcus → Sarah: RELATED_TO ✓\n\n**Root cause:**\nDeep extraction captures basic relationships but not:\n1. Relationships to the implicit 'user' entity\n2. Entity attributes like profession, role\n3. Relationship subtypes (brother vs generic relative)\n\n**Proposed fix:**\n1. Create implicit 'user' entity that represents the owner\n2. Extract relationships where 'my/I' indicates user connection\n3. Add attribute extraction alongside relationship extraction\n4. Use more specific relationship types from extraction prompt\n\n**Files:**\n- internal/extract/deep.go\n- internal/graph/types.go","status":"open","priority":2,"issue_type":"task","owner":"thunder@anthropic.com","created_at":"2026-01-13T17:17:40.267683-08:00","created_by":"Dan Mills","updated_at":"2026-01-13T17:17:40.267683-08:00"}
{"id":"BUD-2ls","title":"Track trace retrieval usefulness","description":"No mechanism to track 'this trace was retrieved but wasn't useful'. Negative feedback could help prune irrelevant retrievals over time. Related to BUD-t0j (thread outcomes) but focuses on the negative signal - traces that appeared in context but didn't contribute.","status":"open","priority":3,"issue_type":"feature","created_at":"2026-01-07T16:00:29.567735+01:00","created_by":"thunder","updated_at":"2026-01-07T16:00:29.567735+01:00"}
{"id":"BUD-3fx","title":"Alert on Discord when high-priority autonomous work is blocked by budget","description":"When a high-priority task impulse (P1 or urgent P2) is blocked from running due to daily budget exhaustion, Bud should send a Discord message to alert the owner. This ensures important reminders/tasks don't silently fail to fire.\n\nImplementation:\n- In the impulse processing code, when CanDoAutonomousWork returns false\n- Check if the blocked impulse is high priority (intensity \u003e= 0.8)\n- If so, send a Discord message like: 'Heads up: I wanted to remind you about [task] but I hit my daily thinking budget. Want me to proceed anyway?'\n- Could include a way for user to approve one-off budget override","status":"open","priority":2,"issue_type":"feature","created_at":"2026-01-07T20:46:03.14599+01:00","created_by":"thunder","updated_at":"2026-01-07T20:46:03.14599+01:00"}
{"id":"BUD-4fz","title":"Google Calendar integration","description":"Port calendar integration from bud1. List events, create events, check free/busy. Add MCP tools and reflex actions.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-07T01:23:21.897865+01:00","created_by":"thunder","updated_at":"2026-01-07T01:23:21.897865+01:00"}
{"id":"BUD-526","title":"Reflex fire_count not incrementing","description":"gtd-handler reflex fires correctly but fire_count stays at 0. Discovered when owner tested 'show the gtd inbox' - reflex handled it but list_reflexes still showed fire_count: 0. Tracking bug, not functionality bug.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-11T02:26:12.339583-08:00","created_by":"thunder","updated_at":"2026-01-11T09:01:30.568731-08:00","closed_at":"2026-01-11T09:01:30.568731-08:00","close_reason":"Closed","comments":[{"id":1,"issue_id":"BUD-526","author":"thunder","text":"Root cause found: Two separate reflex.Engine instances exist - one in bud daemon (cmd/bud/main.go:260) and one in bud-mcp (cmd/bud-mcp/main.go:567). They're separate processes with separate in-memory counters. When a reflex fires in the daemon, it increments that engine's counter, but list_reflexes reads from the MCP engine which never executes reflexes.\n\nFix options:\n1. Persist FireCount to the reflex YAML file (clean, survives restarts)\n2. Add a shared state file that both read/write\n3. Have MCP query the daemon for stats via some IPC\n\nRecommend option 1 - add FireCount/LastFired persistence to SaveReflex and reload on Load.","created_at":"2026-01-11T13:01:08Z"},{"id":2,"issue_id":"BUD-526","author":"thunder","text":"Fixed. Added yaml tags to LastFired and FireCount, and saveReflexStats() to persist after Execute. Build and tests pass.","created_at":"2026-01-11T17:01:16Z"}]}
{"id":"BUD-91c","title":"Entity resolution and alias tracking not implemented","description":"The v2 architecture specifies entity resolution with deduplication (threshold 0.85), but this isn't working:\n\n**Observed problem:**\n- 'Sarah' (entity-PERSON-sarah) and 'Sarah Chen' (entity-PERSON-sarah chen) are separate entities\n- They should be merged or linked as aliases\n- No alias tracking visible in entity storage\n\n**Design spec (from v2-memory-architecture.md):**\n- Match extracted entities against existing graph via embedding similarity\n- Merge when confidence \u003e 0.85, create new otherwise\n- Track aliases for the same entity\n\n**Proposed fix:**\n1. On entity extraction, compute similarity to existing entities of same type\n2. If similarity \u003e 0.85, add as alias to existing entity instead of creating new\n3. Store aliases array on entity nodes\n4. Use canonical name for display, match on any alias\n\n**Files:**\n- internal/graph/entities.go\n- internal/extract/*.go","status":"open","priority":2,"issue_type":"task","owner":"thunder@anthropic.com","created_at":"2026-01-13T17:17:40.169174-08:00","created_by":"Dan Mills","updated_at":"2026-01-13T17:17:40.169174-08:00"}
{"id":"BUD-bni","title":"Trace decay and pruning","description":"Traces accumulate forever, adding noise to retrieval. Need mechanism to decay or prune old irrelevant traces. Could be: time-based decay of activation/strength, pruning traces never accessed, merging similar traces, or marking traces as superseded.","status":"open","priority":3,"issue_type":"feature","created_at":"2026-01-07T15:59:57.470871+01:00","created_by":"thunder","updated_at":"2026-01-07T15:59:57.470871+01:00"}
{"id":"BUD-bu0","title":"Wire up Ollama for reflex actions","description":"The ollama_prompt action exists in the reflex system but needs to actually call the local Ollama server. Test with qwen2.5:14b model for fast local inference in reflexes.","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-07T01:00:28.210651+01:00","created_by":"thunder","updated_at":"2026-01-07T01:00:28.210651+01:00"}
{"id":"BUD-d20","title":"Notion integration: reflex actions","description":"Add reflex actions for Notion pipelines: notion_query_db, notion_get_page. Enable scheduled reflexes to pull from Notion and conditionally wake executive.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-07T01:23:20.448178+01:00","created_by":"thunder","updated_at":"2026-01-07T01:23:20.448178+01:00"}
{"id":"BUD-heu","title":"Integrate reflex engine with main perch loop","description":"Wire up the reflex engine to process incoming percepts before they go to attention/executive. Reflexes should fire for pattern matches and optionally block escalation to the executive.","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-07T01:00:26.840234+01:00","created_by":"thunder","updated_at":"2026-01-07T01:00:26.840234+01:00"}
{"id":"BUD-hof","title":"Notion integration: API client","description":"Create Notion API client in internal/integrations/notion/client.go. Handle authentication via NOTION_API_KEY, implement core HTTP methods for Notion API v1.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-07T01:23:19.02488+01:00","created_by":"thunder","updated_at":"2026-01-07T01:26:33.021168+01:00","closed_at":"2026-01-07T01:26:33.021168+01:00","close_reason":"Created Notion API client with Search, GetPage, GetDatabase, QueryDatabase methods. Includes type definitions for all Notion objects and helper methods for extracting property values."}
{"id":"BUD-ixr","title":"Thread state management: focused/active/frozen","description":"Implement thread state management to limit concurrent Claude sessions:\n\n**States:**\n- focused: 1 thread max, currently has attention\n- active: 3 threads max, Claude running in tmux\n- frozen: unlimited, session on disk only (no tmux window)\n\n**Behavior:**\n- When new thread needs focus and active \u003e= 3, freeze oldest active (kill tmux window, keep session-id)\n- Focused thread moves to active when another thread takes focus\n- Frozen threads can resume later with same session-id (Claude persists state)\n\n**Changes needed:**\n- Add ThreadState to Thread type\n- Add session-id persistence to Thread (for resume)\n- Add state transition logic in attention/executive\n- Add cleanup for old frozen threads (age-based pruning?)\n- Update tmux window management to support freeze/resume","status":"closed","priority":1,"issue_type":"feature","created_at":"2026-01-07T09:23:41.47628+01:00","created_by":"thunder","updated_at":"2026-01-07T09:38:48.277175+01:00","closed_at":"2026-01-07T09:38:48.277175+01:00","close_reason":"Implemented thread state management: added SessionState to types (focused/active/frozen), created SessionManager with Focus/Freeze/Resume operations, integrated into Executive, added tests. Sessions are limited to 1 focused + 3 active max, with automatic freezing of oldest when limit reached."}
{"id":"BUD-jx9","title":"State introspection CLI and MCP tools","description":"Add tools for inspecting and managing Bud's internal state (traces, percepts, threads, logs, queues, sessions). Includes CLI (bud-state) and MCP tools (state_*).","design":"See docs/plans/2026-01-08-state-introspection-design.md and docs/plans/2026-01-08-state-introspection-impl.md","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-08T16:04:23.293758+01:00","updated_at":"2026-01-08T17:26:23.968375+01:00","closed_at":"2026-01-08T17:26:23.968375+01:00","close_reason":"Implemented: memory package methods, state inspection package, bud-state CLI, MCP tools, documentation"}
{"id":"BUD-m81","title":"Evaluate signal_done vs CPU activity for session detection","description":"Compare the effectiveness of two approaches for detecting when Claude is done thinking:\n1. MCP signal_done tool - Claude explicitly signals completion\n2. CPU activity monitoring - Watch process CPU usage for idle detection\n\nNeed to measure: reliability, latency, false positives/negatives. The CPU approach is a fallback but may be more reliable since it doesn't depend on Claude remembering to call signal_done.","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-07T01:00:05.957895+01:00","created_by":"thunder","updated_at":"2026-01-07T01:00:11.659938+01:00"}
{"id":"BUD-mat","title":"Dreaming: background trace connection strengthening","description":"Background process to strengthen connections between traces. Currently traces are isolated - connected only via embedding similarity at retrieval time. A dreaming process could: find traces similar to recently-accessed ones and boost connection weights, merge related traces into higher-level summaries, create explicit links between related traces, decay/prune isolated traces. Consider whether traces should have explicit graph structure or stay embedding-only.","status":"open","priority":3,"issue_type":"feature","created_at":"2026-01-07T15:59:48.720742+01:00","created_by":"thunder","updated_at":"2026-01-07T15:59:48.720742+01:00"}
{"id":"BUD-mua","title":"Urgent percepts bypass attention hysteresis","description":"High-priority reminders and owner messages should preempt the current thread more easily. Currently, switching threads requires beating current salience by a margin (hysteresis). For urgent content (intensity \u003e= 0.8 or from:owner tag), reduce or eliminate this margin so time-sensitive things aren't delayed.","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-07T19:22:58.626846+01:00","created_by":"thunder","updated_at":"2026-01-07T19:55:58.791782+01:00","closed_at":"2026-01-07T19:55:58.791782+01:00","close_reason":"Closed"}
{"id":"BUD-ni6","title":"Migrate beads database to new format","description":"Got legacy database warning on install. Need to run: bd migrate --update-repo-id","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-11T02:31:19.211453-08:00","created_by":"thunder","updated_at":"2026-01-11T06:58:50.972577-08:00","closed_at":"2026-01-11T06:58:50.972577-08:00","close_reason":"Migration completed successfully. Repo ID: f67025ec"}
{"id":"BUD-oxp","title":"Create integrations.md documentation","description":"Create state/notes/integrations.md describing how to query external systems. Update core_seed.md with pointer. Cover Notion initially, leave space for Calendar/GitHub.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-07T01:23:21.167963+01:00","created_by":"thunder","updated_at":"2026-01-07T01:28:40.518771+01:00","closed_at":"2026-01-07T01:28:40.518771+01:00","close_reason":"Created state/notes/integrations.md with Notion tools documentation and placeholders for Calendar/GitHub. Updated core_seed.md with pointer."}
{"id":"BUD-qj7","title":"Configure git identity for state repo commits","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-11T04:59:30.802055-08:00","created_by":"thunder","updated_at":"2026-01-11T06:58:52.715059-08:00","closed_at":"2026-01-11T06:58:52.715059-08:00","close_reason":"Configured git identity: user.name=Bud, user.email=bud@local"}
{"id":"BUD-qon","title":"Notion integration: MCP tools","description":"Add MCP tools for Notion: notion_search, notion_get_page, notion_get_database, notion_describe_database. Register in server.go and wire up handlers.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-07T01:23:19.72398+01:00","created_by":"thunder","updated_at":"2026-01-07T01:27:58.878245+01:00","closed_at":"2026-01-07T01:27:58.878245+01:00","close_reason":"Added 4 Notion MCP tools: notion_search, notion_get_page, notion_get_database, notion_query_database. Tools are conditionally registered when NOTION_API_KEY is set."}
{"id":"BUD-rtx","title":"Investigate wellness task firing repeatedly instead of once","description":"Fresh install showed wellness task notification repeatedly with \"last: never\" - it should only fire once until completed. Need to understand the task scheduling/firing logic and why it wasn't respecting that the notification had already been shown.","design":"## Root Cause\n\nThe recurring task check runs every 1 minute (`cmd/bud/main.go:570`). When a task is due (last_run is nil or interval has passed), it fires an impulse. But nothing automatically calls `complete_bud_task` after the executive handles it.\n\nState-sync works because it has a reflex (`seed/reflexes/state-sync.yaml`) that:\n1. Matches the impulse\n2. Runs the git commands  \n3. Calls `complete_bud_task` at the end\n\nWellness has no reflex - it relies on the executive. When the executive wakes up, handles the impulse, but doesn't call `complete_bud_task`, the task stays at last_run=nil and fires again on the next 1-minute tick.\n\n## Key Code Paths\n\n1. `internal/motivation/tasks.go:291-315` - GenerateImpulses() creates recurring task impulses\n2. `cmd/bud/main.go:582-603` - checkTaskImpulses() fires impulses every minute\n3. `cmd/bud/main.go:302-392` - processPercept() routes to reflex or executive\n4. `internal/motivation/tasks.go:137-151` - Complete() sets LastRun for recurring tasks\n\n## Solution Options\n\n1. **Auto-complete on executive wake** (recommended): After the executive runs for a recurring task impulse, automatically call `complete_bud_task`. The task's purpose is to \"remind\" on a schedule - once reminded, it's done for that interval.\n\n2. **Impulse deduplication**: Track which impulse IDs have been delivered recently. Don't re-fire until interval passes or task is completed.\n\n3. **Require explicit completion**: Keep current behavior but document that executive must call `complete_bud_task`. Risk: executive forgets and task spams.","status":"closed","priority":2,"issue_type":"bug","assignee":"bud","created_at":"2026-01-10T02:10:24.130214+01:00","updated_at":"2026-01-10T02:21:10.898317+01:00","closed_at":"2026-01-10T02:21:10.898317+01:00","close_reason":"Fixed: recurring task impulses now auto-complete after executive wakes. Added core trace and wellness checklist item for tracking investigative commitments."}
{"id":"BUD-rzs","title":"Entity type misclassification in extraction","description":"Entity extractor assigns incorrect types to several entity categories:\n\n**Misclassified entities:**\n- Blue Bottle → LOC (should be ORG - coffee shop)\n- Pixel, Debug → LOC (should be PET/ANIMAL - cat names)\n- sarah@example.com → LOC (should be EMAIL)\n- $50k → PRODUCT (should be MONEY)\n- memory_reset, your memory, I → various (should be filtered as noise)\n\n**Root cause:**\nThe fast entity extraction (spaCy or local model) uses generic NER categories that don't match our domain. Need custom entity types or post-processing rules.\n\n**Proposed fix:**\n1. Add domain-specific entity types: PET, EMAIL, MONEY, ORGANIZATION\n2. Add post-processing rules (regex for emails, $ amounts)\n3. Add noise filtering for common pronouns and system commands\n\n**Files:**\n- internal/extract/fast.go\n- internal/extract/deep.go","status":"open","priority":2,"issue_type":"task","owner":"thunder@anthropic.com","created_at":"2026-01-13T17:17:40.069115-08:00","created_by":"Dan Mills","updated_at":"2026-01-13T17:17:40.069115-08:00"}
{"id":"BUD-s3r","title":"GitHub integration","description":"Port GitHub integration from bud1. List PRs/issues, get notifications, PR details. Add MCP tools and reflex actions.","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-07T01:23:22.620987+01:00","created_by":"thunder","updated_at":"2026-01-07T01:23:22.620987+01:00"}
{"id":"BUD-t0j","title":"Thread outcomes affect trace strength","description":"When a thread completes, the outcome should affect trace weights. Traces that contributed to successful responses should be strengthened. Could use a small local model (ollama) to analyze the Claude log and rank which traces likely contributed most to the outcome. Feed it the thread context + traces + response, ask it to score trace relevance.","status":"open","priority":3,"issue_type":"feature","created_at":"2026-01-07T16:00:04.447317+01:00","created_by":"thunder","updated_at":"2026-01-07T16:00:04.447317+01:00"}
{"id":"BUD-wfh","title":"Multi-hop trace retrieval","description":"Currently we retrieve traces similar to the percept (single hop). Could also retrieve traces similar to *those* traces (multi-hop). This finds more distant but potentially relevant context. E.g., percept about 'deployment' retrieves trace about 'dokku', which retrieves trace about 'server setup'.","status":"open","priority":3,"issue_type":"feature","created_at":"2026-01-07T16:00:23.088843+01:00","created_by":"thunder","updated_at":"2026-01-07T16:00:23.088843+01:00"}
{"id":"BUD-wk3","title":"Mid-thread trace loading","description":"Automatically load additional traces as percepts are added to a thread. Currently traces are only loaded at thread start based on the first percept. If conversation pivots, relevant context isn't fetched. Should be automated - perhaps re-run spreading activation periodically or when thread topic shifts significantly.\n\nIMPORTANT: This is now critical because percepts route to ONE thread only (best match). Other threads that might have matched previously now rely on spreading activation + this feature to get relevant context. Without mid-thread loading, a thread won't see new context that arrives after it started.","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-07T15:59:43.016302+01:00","created_by":"thunder","updated_at":"2026-01-07T20:31:10.975565+01:00","closed_at":"2026-01-07T20:31:10.975565+01:00","close_reason":"Closed"}
